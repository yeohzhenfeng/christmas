<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ğŸ„ åœ£è¯ç¥ç¦</title>

<style>
  :root{
    --bg-a:#ffd1dc;
    --bg-b:#b24592;
    --bg-c:#2b0f2f;
    --ink:#4b134f;
    --pink:#e2558d;
  }

  html,body{
    height:100%;
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    overflow:hidden;
    background:
      radial-gradient(900px 700px at 20% 10%, rgba(255,255,255,.18), transparent 60%),
      radial-gradient(800px 600px at 80% 20%, rgba(255,255,255,.12), transparent 55%),
      linear-gradient(135deg,var(--bg-a),var(--bg-b),var(--bg-c));
  }

  /* subtle glow drift (nice for screenshots) */
  .glow{
    position:fixed;
    width:560px;height:560px;
    border-radius:50%;
    top:-220px; right:-260px;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.22), transparent 62%);
    filter: blur(2px);
    animation: drift 10s ease-in-out infinite;
    pointer-events:none;
  }
  @keyframes drift{
    0%,100%{ transform: translate(0,0); }
    50%{ transform: translate(-50px,40px); }
  }

  /* snow */
  .snowflake{
    position:fixed;
    top:-10%;
    color:#fff;
    opacity:.85;
    user-select:none;
    pointer-events:none;
    text-shadow: 0 1px 2px rgba(0,0,0,.35);
    animation: fall linear infinite;
    z-index:1;
  }
  @keyframes fall{
    from{ transform:translateY(-10vh); }
    to{ transform:translateY(110vh); }
  }

  /* center */
  .wrap{
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:22px;
    box-sizing:border-box;
    position:relative;
    z-index:2;
  }

  /* card (screenshot-friendly) */
  .card{
    width:min(360px,92vw);
    text-align:center;
    border-radius:28px;
    padding: 34px 28px 28px;
    background: rgba(255,255,255,.92);
    box-shadow: 0 26px 70px rgba(0,0,0,.38);
    position:relative;
    overflow:hidden;
    transition: opacity 900ms ease, transform 900ms ease, filter 900ms ease;
  }

  /* gold rim */
  .card::before{
    content:"";
    position:absolute;
    inset:0;
    border-radius:28px;
    padding:1px;
    background: linear-gradient(135deg, rgba(255,215,170,.95), rgba(255,255,255,.2), rgba(255,200,230,.7));
    -webkit-mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    pointer-events:none;
  }

  .badge{
    display:inline-block;
    font-size:12px;
    color:#fff;
    background: var(--pink);
    padding:4px 10px;
    border-radius:999px;
    margin-bottom:12px;
    box-shadow: 0 8px 20px rgba(226,85,141,.35);
  }

  h1{
    margin:0 0 10px;
    font-size:26px;
    color:#7a1f4b;
    letter-spacing:.3px;
  }

  .text{
    font-size:16px;
    line-height:1.75;
    color: var(--ink);
    min-height:150px;
    white-space:pre-line;
  }

  .btn{
    margin-top:16px;
    padding:10px 18px;
    border-radius:999px;
    border:none;
    background: var(--pink);
    color:#fff;
    font-size:14px;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 10px 24px rgba(226,85,141,.42);
  }
  .btn:active{ transform:scale(.96); }

  .music{
    margin-top:10px;
    background:#fff;
    color:#b24592;
    border:1px solid rgba(178,69,146,.35);
    box-shadow:none;
  }

  .from{
    margin-top:14px;
    font-size:14px;
    color:#7a1f4b;
    opacity:.92;
  }

  /* ending state */
  .card.ending{
    opacity:0;
    transform: translateY(10px) scale(.985);
    filter: blur(1px);
  }

  /* overlay */
  .overlay{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background: rgba(15, 5, 20, .55);
    backdrop-filter: blur(6px);
    opacity:0;
    pointer-events:none;
    transition: opacity 900ms ease;
    z-index:5;
    padding:22px;
    box-sizing:border-box;
  }
  .overlay.show{
    opacity:1;
    pointer-events:auto;
  }
  .overlay-card{
    width:min(360px,92vw);
    border-radius:26px;
    padding:26px 22px;
    background: rgba(255,255,255,.92);
    text-align:center;
    box-shadow: 0 24px 80px rgba(0,0,0,.45);
    position:relative;
    overflow:hidden;
  }
  .overlay-title{
    font-size:20px;
    margin:0 0 8px;
    color:#7a1f4b;
  }
  .overlay-desc{
    margin:0;
    color:var(--ink);
    opacity:.9;
    line-height:1.6;
    font-size:14px;
    white-space:pre-line;
  }
  .small{
    margin-top:10px;
    font-size:12px;
    opacity:.75;
  }

  @media (max-width:420px){
    h1{ font-size:23px; }
    .text{ font-size:15px; min-height:145px; }
    .card{ padding: 28px 22px 22px; }
  }

  @media (prefers-reduced-motion: reduce){
    .snowflake,.glow{ animation:none !important; }
    .card{ transition:none !important; }
    .overlay{ transition:none !important; }
  }
</style>
</head>

<body>
  <div class="glow" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card" id="card">
      <div class="badge" id="badge">ğŸ„ ä»Šå¤©é™å®š</div>
      <h1>ç»™å°ä»™å¥³</h1>

      <div class="text" id="text"></div>

      <button class="btn" id="next">ç»§ç»­çœ‹ â„ï¸</button>
      <br />
      <button class="btn music" id="musicBtn">ğŸµ æ’­æ”¾åœ£è¯æ­Œ</button>

      <div class="from">â€”â€” ZF</div>
    </div>
  </div>

  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="overlay-card">
      <h2 class="overlay-title">â° å·²ç»“æŸ</h2>
      <p class="overlay-desc" id="endText">
        ä»Šå¤©é™å®šçš„ç¥ç¦å·²ç»è¿‡æœŸå•¦ï½\n
        ä½†å¸Œæœ›ä½ çœ‹åˆ°è¿‡çš„é‚£ä»½æ¸©æš–ï¼Œ\n
        è¿˜èƒ½ç•™åœ¨å¿ƒé‡Œä¸€ç‚¹ç‚¹ â„ï¸
      </p>
      <div class="small">ï¼ˆä½ å¯ä»¥æˆªå±ç•™ä½œçºªå¿µï¼‰</div>
    </div>
  </div>

  <audio id="bgm" loop>
    <!-- å…è´¹æ— ç‰ˆæƒåœ£è¯éŸ³ä¹ -->
    <source src="https://cdn.pixabay.com/download/audio/2022/12/06/audio_6a0c7b3c25.mp3?filename=christmas-village-ambient-124008.mp3" type="audio/mpeg">
  </audio>

<script>
  // ===== 1) ä»Šå¤©é™å®š + ä»Šæ™š12ç‚¹åç»“æŸï¼ˆæœ¬åœ°æ—¶é—´ï¼‰ =====
  const now = new Date();
  const endTime = new Date(now);
  endTime.setHours(24,0,0,0); // tonight 12:00 AM (next day 00:00:00)

  // å¦‚æœä½ åªæƒ³â€œåœ£è¯å½“å¤©æ‰ç®—ä»Šå¤©é™å®šâ€ï¼Œå¯ä»¥å¯ç”¨ä¸‹é¢ä¸¤è¡Œï¼š
  // const isChristmas = now.getMonth() === 11 && now.getDate() === 25;
  // const todayLimited = isChristmas;

  // ç›®å‰é€»è¾‘ï¼šåªè¦æ˜¯åœ¨â€œä»Šæ™š12ç‚¹ä¹‹å‰â€æ‰“å¼€ï¼Œå°±ç®—ä»Šå¤©é™å®š
  const todayLimited = now < endTime;

  const badge = document.getElementById("badge");
  badge.textContent = todayLimited ? "ğŸ„ ä»Šå¤©é™å®š" : "â„ï¸ æ™®é€šæ—¥ä¹Ÿæœ‰æ•ˆ";

// ===== 2) æ‰“å­—æœºæ–‡æœ¬ï¼ˆå¹½é»˜æœ‹å‹ç‰ˆï¼Œä¸å‘Šç™½ã€ä¸å…³å¿ƒï¼‰ =====
const messagesToday = [
  "å—¨ï¼Œå°ä»™å¥³ ğŸ‘‹\nåœ£è¯å¿«ä¹ ğŸ„",
  "å…ˆè¯´å¥½ï¼Œ\nè¿™é‡Œæ²¡æœ‰ä»€ä¹ˆæ·±å±‚å«ä¹‰ ğŸ˜‚",
  "åªæ˜¯æˆ‘åœ¨æµ‹è¯•ä¸€ä¸ªä¸œè¥¿ï¼Œ\nåˆšå¥½ä»Šå¤©æ˜¯åœ£è¯èŠ‚ã€‚",
  "æ‰€ä»¥å®ƒå°±é¡ºä¾¿é•¿è¿™æ ·äº†ã€‚",
  "ğŸ„ åœ£è¯å¿«ä¹\nä»Šå¤©é™å®šå†…å®¹ã€‚\nçœ‹çœ‹å°±å¥½ï¼Œåˆ«å¤ªè®¤çœŸ â„ï¸"
];

const messagesNormal = [
  "å—¨ï¼Œå°ä»™å¥³ ğŸ‘‹",
  "è¿™åŸæœ¬æ˜¯åœ£è¯èŠ‚é™å®šçš„ã€‚",
  "ä½†ä½ åœ¨åˆ«çš„æ—¥å­ç‚¹å¼€äº†ã€‚",
  "é‚£å°±â€¦â€¦\néšä¾¿æ‰“ä¸ªæ‹›å‘¼å§ ğŸ˜„"
];


  const messages = todayLimited ? messagesToday : messagesNormal;

  let step = 0;
  const textBox = document.getElementById("text");
  const nextBtn = document.getElementById("next");

  function typeText(msg, i = 0){
    if(i === 0) textBox.textContent = "";
    if(i < msg.length){
      textBox.textContent += msg[i];
      setTimeout(()=>typeText(msg, i+1), 58);
    }
  }

  nextBtn.onclick = () => {
    if(step < messages.length){
      typeText(messages[step]);
      step++;
      if(step === messages.length){
        nextBtn.textContent = "ğŸ„";
      }
    }
  };

  // é»˜è®¤å…ˆæ˜¾ç¤ºç¬¬ä¸€æ®µï¼ˆæ›´åƒâ€œæ‰“å¼€å°±æœ‰å†…å®¹â€ï¼Œæˆªå›¾æ›´å¥½çœ‹ï¼‰
  typeText(messages[0]); step = 1;

  // ===== 3) é›ªæ™¯ï¼ˆå¯åœæ­¢ï¼‰ =====
  const snowChars = ["â„","â…","â†"];
  const snowCount = 34;
  const snowEls = [];

  function createSnow(){
    for(let i=0;i<snowCount;i++){
      const s = document.createElement("div");
      s.className = "snowflake";
      s.textContent = snowChars[Math.floor(Math.random()*snowChars.length)];
      s.style.left = Math.random()*100 + "vw";
      s.style.fontSize = (12 + Math.random()*14) + "px";
      s.style.animationDuration = (6 + Math.random()*8) + "s";
      s.style.animationDelay = (-Math.random()*8) + "s";
      s.style.opacity = (0.55 + Math.random()*0.45).toFixed(2);
      document.body.appendChild(s);
      snowEls.push(s);
    }
  }

  function stopSnow(){
    // åœæ­¢åŠ¨ç”»ï¼Œå¹¶æ…¢æ…¢æ·¡å‡ºé›ªèŠ±
    snowEls.forEach((el, idx) => {
      el.style.animationPlayState = "paused";
      el.style.transition = "opacity 900ms ease";
      el.style.opacity = "0";
      setTimeout(() => el.remove(), 1100 + idx * 6);
    });
  }

  createSnow();

  // ===== 4) éŸ³ä¹å¼€å…³ï¼ˆä¸è‡ªåŠ¨æ’­æ”¾ï¼‰ =====
  const bgm = document.getElementById("bgm");
  const musicBtn = document.getElementById("musicBtn");
  let playing = false;

  musicBtn.onclick = () => {
    if(!playing){
      bgm.play();
      musicBtn.textContent = "â¸ï¸ æš‚åœéŸ³ä¹";
      playing = true;
    }else{
      bgm.pause();
      musicBtn.textContent = "ğŸµ æ’­æ”¾åœ£è¯æ­Œ";
      playing = false;
    }
  };

  // ===== 5) åˆ°ç‚¹è‡ªåŠ¨ç»“æŸï¼šé›ªåœ + æ–‡å­—æ·¡å‡º + æ˜¾ç¤ºå·²ç»“æŸ =====
  const card = document.getElementById("card");
  const overlay = document.getElementById("overlay");

  function endShow(){
    // å…ˆåœé›ª
    stopSnow();

    // åœéŸ³ä¹
    try { bgm.pause(); } catch(e){}
    playing = false;
    musicBtn.textContent = "ğŸµ æ’­æ”¾åœ£è¯æ­Œ";

    // å¡ç‰‡æ·¡å‡º
    card.classList.add("ending");

    // ç¨åå‡ºç°â€œå·²ç»“æŸâ€
    setTimeout(() => {
      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden","false");
    }, 720);
  }

  // å¦‚æœå·²ç»è¿‡äº†ä»Šæ™š12ç‚¹ï¼Œç›´æ¥ç»“æŸæ€
  if(now >= endTime){
    // è®©é¡µé¢å…ˆæ¸²æŸ“ä¸€ä¸‹å†è½¬ç»“æŸæ€ï¼Œè§‚æ„Ÿæ›´ä¸æ»‘
    setTimeout(endShow, 350);
  } else {
    // è®¡ç®—åˆ°ä»Šæ™š12ç‚¹çš„å‰©ä½™æ—¶é—´ï¼Œåˆ°äº†è‡ªåŠ¨è§¦å‘
    const ms = endTime.getTime() - now.getTime();
    setTimeout(endShow, ms);
  }
</script>
</body>
</html>
