<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ğŸ„ åœ£è¯ç¥ç¦</title>

<style>
:root{
  --bg-a:#0f3d2e;
  --bg-b:#1f6f54;
  --bg-c:#0b2e22;
  --ink:#234c3b;
  --gold:#cfa24a;
}

html,body{
  height:100%;
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  overflow:hidden;
  background:
    radial-gradient(900px 700px at 20% 10%, rgba(255,255,255,.12), transparent 60%),
    radial-gradient(800px 600px at 80% 20%, rgba(255,255,255,.08), transparent 55%),
    linear-gradient(135deg,var(--bg-a),var(--bg-b),var(--bg-c));
}

.glow{
  position:fixed;
  width:560px;height:560px;
  border-radius:50%;
  top:-220px; right:-260px;
  background: radial-gradient(circle at 30% 30%, rgba(255,220,150,.25), transparent 62%);
  animation: drift 10s ease-in-out infinite;
  pointer-events:none;
}
@keyframes drift{
  0%,100%{ transform: translate(0,0); }
  50%{ transform: translate(-50px,40px); }
}

.snowflake{
  position:fixed;
  top:-10%;
  color:#fff;
  opacity:.85;
  pointer-events:none;
  animation: fall linear infinite;
}
@keyframes fall{
  from{ transform:translateY(-10vh); }
  to{ transform:translateY(110vh); }
}

.wrap{
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:22px;
}

.card{
  width:min(360px,92vw);
  background:rgba(255,255,255,.94);
  border-radius:28px;
  padding:34px 28px;
  text-align:center;
  box-shadow:0 26px 70px rgba(0,0,0,.38);
  transition:opacity .9s ease, transform .9s ease;
}

.badge{
  display:inline-block;
  font-size:12px;
  color:#fff;
  background:var(--gold);
  padding:4px 10px;
  border-radius:999px;
  margin-bottom:12px;
}

h1{ margin:0 0 10px; color:#1f5a44; }

.text{
  min-height:140px;
  white-space:pre-line;
  color:var(--ink);
  line-height:1.7;
}

.btn{
  margin-top:14px;
  padding:10px 18px;
  border-radius:999px;
  border:none;
  background:var(--gold);
  color:#fff;
  font-weight:600;
}

.music{
  margin-top:10px;
  background:#fff;
  color:#1f6f54;
  border:1px solid rgba(31,111,84,.35);
}

.from{ margin-top:14px; font-size:14px; color:#1f5a44; }

.card.ending{
  opacity:0;
  transform:translateY(10px) scale(.98);
}
</style>
</head>

<body>

<div class="glow"></div>

<div class="wrap">
  <div class="card" id="card">
    <div class="badge" id="badge">ğŸ„ ä»Šå¤©é™å®š</div>
    <h1>ç»™å°ä»™å¥³</h1>

    <div class="text" id="text"></div>

    <button class="btn" id="next">ç»§ç»­çœ‹ â„ï¸</button><br/>
    <button class="btn music" id="musicBtn">ğŸµ æ’­æ”¾åœ£è¯æ­Œ</button>

    <div class="from">â€”â€” ZF</div>
  </div>
</div>

<audio id="bgm" preload="auto" playsinline loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/12/06/audio_6a0c7b3c25.mp3?filename=christmas-village-ambient-124008.mp3" type="audio/mpeg">
</audio>

<script>
/* ===== æ—¶é—´æ§åˆ¶ ===== */
const now = new Date();
const endTime = new Date(now);
endTime.setHours(24,0,0,0);
document.getElementById("badge").textContent = now < endTime ? "ğŸ„ ä»Šå¤©é™å®š" : "â„ï¸ å·²ç»“æŸ";

/* ===== æ–‡æ¡ˆ ===== */
const messages = [
  "å—¨ï¼Œå°ä»™å¥³ ğŸ‘‹\nåœ£è¯å¿«ä¹ ğŸ„",
  "æ”¾å¿ƒï¼Œ\nè¿™ä¸æ˜¯ä»€ä¹ˆé‡è¦çš„ä¸œè¥¿ ğŸ˜„",
  "æˆ‘åœ¨æµ‹è¯•é¡µé¢ï¼Œ\nåˆšå¥½ä»Šå¤©æ˜¯åœ£è¯èŠ‚ã€‚",
  "æ‰€ä»¥å°±é¡ºæ‰‹åŠ äº†ç‚¹èŠ‚æ—¥æ°”æ°›ã€‚",
  "ğŸ„ åœ£è¯å¿«ä¹\nä»Šå¤©é™å®šå†…å®¹ã€‚\nçœ‹çœ‹å°±å¥½ â„ï¸"
];

let step=0;
const textBox=document.getElementById("text");
const nextBtn=document.getElementById("next");

function typeText(msg,i=0){
  if(i===0) textBox.textContent="";
  if(i<msg.length){
    textBox.textContent+=msg[i];
    setTimeout(()=>typeText(msg,i+1),55);
  }
}
typeText(messages[0]); step=1;
nextBtn.onclick=()=>{ if(step<messages.length){ typeText(messages[step++]); } };

/* ===== é›ª ===== */
["â„","â…","â†"].forEach(()=>{});
for(let i=0;i<32;i++){
  const s=document.createElement("div");
  s.className="snowflake";
  s.textContent="â„";
  s.style.left=Math.random()*100+"vw";
  s.style.fontSize=(12+Math.random()*14)+"px";
  s.style.animationDuration=(6+Math.random()*8)+"s";
  s.style.animationDelay=(-Math.random()*8)+"s";
  document.body.appendChild(s);
}

/* ===== ğŸµ æœ€ç¨³éŸ³ä¹ ===== */
const bgm=document.getElementById("bgm");
const musicBtn=document.getElementById("musicBtn");
let playing=false;
bgm.volume=0.05;

function fadeIn(){
  let v=0.05;
  const t=setInterval(()=>{
    v+=0.03; bgm.volume=Math.min(v,0.5);
    if(v>=0.5) clearInterval(t);
  },80);
}

musicBtn.addEventListener("click",async()=>{
  musicBtn.textContent="â³ æ­£åœ¨æ’­æ”¾â€¦";
  try{
    await bgm.play();
    playing=true;
    fadeIn();
    musicBtn.textContent="â¸ï¸ æš‚åœéŸ³ä¹";
  }catch(e){
    musicBtn.textContent="ğŸµ å†ç‚¹ä¸€æ¬¡è¯•è¯•";
    alert("æµè§ˆå™¨é™åˆ¶éŸ³é¢‘æ’­æ”¾ï¼Œè¯·å†ç‚¹ä¸€ä¸‹é¡µé¢ç©ºç™½å¤„ï¼Œç„¶åå†ç‚¹æ’­æ”¾ã€‚");
  }
});

document.addEventListener("visibilitychange",()=>{
  if(document.hidden && playing){
    bgm.pause();
    playing=false;
    musicBtn.textContent="ğŸµ æ’­æ”¾åœ£è¯æ­Œ";
  }
});
</script>

</body>
</html>
